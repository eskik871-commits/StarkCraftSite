<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mini Subway Surfers</title>
<style>
  body { margin:0; overflow:hidden; background:#87ceeb; }
  canvas { display:block; margin:0 auto; background:#555; }
</style>
</head>
<body>
<canvas id="gameCanvas" width="400" height="600"></canvas>
<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');

const laneCount = 3;
const laneWidth = canvas.width / laneCount;
let player = { lane:1, y:500, width:40, height:40, color:'#ffcc00' };
let obstacles = [];
let coins = [];
let score = 0;
let speed = 5;
let gameOver = false;

// Klavye kontrolü
document.addEventListener('keydown', e => {
  if(e.key === 'ArrowLeft' && player.lane > 0) player.lane--;
  if(e.key === 'ArrowRight' && player.lane < laneCount-1) player.lane++;
});

// Engel oluştur
function spawnObstacle() {
  let lane = Math.floor(Math.random()*laneCount);
  obstacles.push({ lane: lane, y:-50, width:40, height:40, color:'#ff0000' });
}

// Coin oluştur
function spawnCoin() {
  let lane = Math.floor(Math.random()*laneCount);
  coins.push({ lane: lane, y:-50, width:20, height:20, color:'#00ff00' });
}

// Oyun güncelle
function update() {
  if(gameOver) return;

  // Engel hareketi
  obstacles.forEach(ob => ob.y += speed);
  coins.forEach(c => c.y += speed);

  // Çarpma kontrolü
  obstacles.forEach(ob => {
    if(ob.lane === player.lane &&
       player.y < ob.y + ob.height &&
       player.y + player.height > ob.y){
      gameOver = true;
    }
  });

  // Coin toplama
  coins.forEach((c,i) => {
    if(c.lane === player.lane &&
       player.y < c.y + c.height &&
       player.y + player.height > c.y){
      score += 5;
      coins.splice(i,1);
    }
  });

  // Engel ve coin temizleme
  obstacles = obstacles.filter(ob => ob.y < canvas.height);
  coins = coins.filter(c => c.y < canvas.height);

  // Yeni engel / coin oluşturma
  if(Math.random() < 0.02) spawnObstacle();
  if(Math.random() < 0.01) spawnCoin();

  // Hız artışı
  if(score % 50 === 0) speed = 5 + Math.floor(score/50);
  score++; // Mesafe puanı
}

// Çizim
function draw() {
  ctx.clearRect(0,0,canvas.width,canvas.height);

  // Şeritler
  for(let i=1;i<laneCount;i++){
    ctx.strokeStyle = '#fff';
    ctx.beginPath();
    ctx.moveTo(i*laneWidth,0);
    ctx.lineTo(i*laneWidth,canvas.height);
    ctx.stroke();
  }

  // Oyuncu
  ctx.fillStyle = player.color;
  ctx.fillRect(player.lane*laneWidth + (laneWidth-player.width)/2, player.y, player.width, player.height);

  // Engeller
  obstacles.forEach(ob => {
    ctx.fillStyle = ob.color;
    ctx.fillRect(ob.lane*laneWidth + (laneWidth-ob.width)/2, ob.y, ob.width, ob.height);
  });

  // Coinler
  coins.forEach(c => {
    ctx.fillStyle = c.color;
    ctx.fillRect(c.lane*laneWidth + (laneWidth-c.width)/2, c.y, c.width, c.height);
  });

  // Skor
  ctx.fillStyle = '#fff';
  ctx.font = '20px Arial';
  ctx.fillText('Skor: ' + score, 10, 30);

  if(gameOver){
    ctx.fillStyle = '#000';
    ctx.font = '40px Arial';
    ctx.fillText('Oyun Bitti!', 80, 300);
    ctx.font = '20px Arial';
    ctx.fillText('Yeniden başlatmak için sayfayı yenileyin', 30, 350);
  }
}

// Oyun döngüsü
function loop() {
  update();
  draw();
  requestAnimationFrame(loop);
}

loop();
</script>
</body>
</html>
